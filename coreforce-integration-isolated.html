<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coreFORCE Checkout Integration - Isolated</title>
    
    <!-- React Checkout App CSS - Isolated -->
    <link rel="stylesheet" href="https://lerrysuzara.github.io/checkout2025/assets/index-449700de.css">
    
    <style>
        /* Isolated styles to avoid conflicts */
        .react-checkout-wrapper {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            isolation: isolate;
        }
        .coreforce-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        .checkout-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .integration-info {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        /* Reset any conflicting styles */
        .react-checkout-wrapper * {
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <!-- Isolated React Checkout Container -->
    <div class="react-checkout-wrapper">
        <!-- coreFORCE Page Header -->
        <div class="coreforce-header">
            <h1>üè™ Your Store Name</h1>
            <p>Complete your purchase with our secure checkout</p>
        </div>

        <div class="integration-info">
            <h3>üîó Isolated Integration Test</h3>
            <p>This version is designed to avoid conflicts with coreFORCE's existing scripts.</p>
            <p><strong>Status:</strong> <span id="integration-status">Loading...</span></p>
        </div>

        <!-- React Checkout App Container -->
        <div class="checkout-container">
            <div id="react-checkout-root"></div>
        </div>
    </div>

    <!-- coreFORCE Shopping Cart Data Function -->
    <script>
        // Ensure this doesn't conflict with existing coreFORCE scripts
        (function() {
            'use strict';
            
            // Store original jQuery if it exists
            var originalJQuery = window.jQuery;
            var original$ = window.$;
            
            // This function should be provided by coreFORCE
            window.getShoppingCartItems = function() {
                console.log('üîÑ coreFORCE getShoppingCartItems() called');
                
                // Return your actual coreFORCE cart data here
                return {
                    "order_upsell_products": {
                        "91349152": {
                            "product_id": 91349152,
                            "description": "Discrete Packaging",
                            "quantity": 3,
                            "sale_price": "3.00",
                            "total_cost": "9.00",
                            "required": false,
                            "checked": ""
                        }
                    },
                    "estimated_shipping_charge": "41.95",
                    "default_location_id": "",
                    "jquery_templates": "",
                    "custom_field_data": [],
                    "total_savings": "79.05",
                    "retail_agreements": [],
                    "shipping_required": true,
                    "pickup_locations": false,
                    "valid_payment_methods": "297,361,595,710,711,712,713,722,723,724",
                    "shopping_cart_items": [
                        {
                            "shopping_cart_item_id": 1839696,
                            "shopping_cart_id": 79655841,
                            "product_id": 91957734,
                            "description": "USED GLOCK 43 PISTOL 9MM 2-6RD MAGS EXCELLENT COND.",
                            "location_id": "",
                            "serial_number": "",
                            "time_submitted": "2025-07-25 01:06:08",
                            "quantity": 1,
                            "sale_price": "395.95",
                            "promotion_id": "",
                            "version": 1,
                            "product_addons": [],
                            "addon_count": 0,
                            "promotion_requirements": 0,
                            "order_upsell_product": false,
                            "price_calculation": "Using pricing structure: Firearms...",
                            "product_tag_ids": "715",
                            "original_sale_price": "475.00",
                            "unit_price": "395.95",
                            "map_policy": "STRICT",
                            "product_code": "Z4_GHG4938X",
                            "upc_code": "787450540255",
                            "manufacturer_sku": "",
                            "model": "",
                            "list_price": "475.00",
                            "small_image_url": "https://range-test.coreware.com/cache/image-small-386986-0755e42dbde8b329cc777d0f5c9c0406.webp",
                            "image_url": "https://range-test.coreware.com/cache/image-full-386986-0755e42dbde8b329cc777d0f5c9c0406.webp",
                            "base_cost": "359.95",
                            "discount": "17%",
                            "savings": "79.05",
                            "inventory_quantity": 21,
                            "product_restrictions": "",
                            "shipping_options": {
                                "pickup": false,
                                "ship_to_store": false,
                                "ship_to_home": true,
                                "ship_to_ffl": false
                            },
                            "pickup": "",
                            "ship_to_store": "",
                            "ship_to_home": "shipping-option-ship-to-home",
                            "ship_to_ffl": "",
                            "cart_maximum": "",
                            "cart_minimum": "",
                            "no_online_order": 0,
                            "custom_fields": "",
                            "custom_field_classes": "",
                            "item_addons": "",
                            "addon_classes": "",
                            "other_classes": "product-tag-new_product"
                        },
                        {
                            "shopping_cart_item_id": 1839697,
                            "shopping_cart_id": 79655841,
                            "product_id": 91957598,
                            "description": "RUGER RXM 9MM PISTOL 4\" AMERICAN FLAG O.R. 2-15RD MAGS - ORION EXCLUSIVE",
                            "location_id": "",
                            "serial_number": "",
                            "time_submitted": "2025-07-25 01:10:24",
                            "quantity": 1,
                            "sale_price": "469.28",
                            "promotion_id": "",
                            "version": 1,
                            "product_addons": [],
                            "addon_count": 0,
                            "promotion_requirements": 0,
                            "order_upsell_product": false,
                            "price_calculation": "Using pricing structure: Firearms...",
                            "product_tag_ids": "457,715",
                            "original_sale_price": "",
                            "unit_price": "469.28",
                            "map_policy": "CART_PRICE",
                            "product_code": "O17_RUGE19400-FLAG",
                            "upc_code": "756542285992",
                            "manufacturer_sku": "19400-FLAG",
                            "model": "RXM",
                            "list_price": "419.00",
                            "small_image_url": "https://range-test.coreware.com/cache/image-small-386556-5d268d52e3177a9f99c4a4afc7b0a755.webp",
                            "image_url": "https://range-test.coreware.com/cache/image-full-386556-5d268d52e3177a9f99c4a4afc7b0a755.webp",
                            "base_cost": "419.00",
                            "discount": "",
                            "savings": "",
                            "inventory_quantity": 54,
                            "product_restrictions": "",
                            "shipping_options": {
                                "pickup": false,
                                "ship_to_store": false,
                                "ship_to_home": false,
                                "ship_to_ffl": true
                            },
                            "pickup": "",
                            "ship_to_store": "",
                            "ship_to_home": "",
                            "ship_to_ffl": "shipping-option-ship-to-ffl",
                            "cart_maximum": "",
                            "cart_minimum": "",
                            "no_online_order": 0,
                            "custom_fields": "",
                            "custom_field_classes": "",
                            "item_addons": "",
                            "addon_classes": "",
                            "other_classes": "product-tag-ffl_required product-tag-new_product"
                        }
                    ],
                    "promotion_code": "OVER100",
                    "promotion_id": 1,
                    "promotion_code_description": "Over 100 Discount",
                    "promotion_code_details": "",
                    "discount_amount": "0.00",
                    "discount_percent": "20.00",
                    "shopping_cart_item_count": 2,
                    "loyalty_points_awarded": "This purchase will add 10 loyalty points to your account.",
                    "analytics_event": {
                        "event": "load_cart",
                        "event_data": {
                            "items": []
                        }
                    }
                };
            };

            // Update status
            document.getElementById('integration-status').textContent = 'Ready';
            
            // Log when the page loads
            console.log('üöÄ Isolated coreFORCE integration loaded');
            console.log('üì¶ React checkout app will be loaded from GitHub Pages');
            
            // Restore original jQuery if it was modified
            if (originalJQuery && !window.jQuery) {
                window.jQuery = originalJQuery;
            }
            if (original$ && !window.$) {
                window.$ = original$;
            }
        })();
    </script>

    <!-- React Checkout App JavaScript - Loaded with error handling -->
    <script>
        (function() {
            'use strict';
            
            // Wait for DOM to be ready
            function loadReactApp() {
                try {
                    // Create script element
                    var script = document.createElement('script');
                    script.src = 'https://lerrysuzara.github.io/checkout2025/assets/index-3b19ec32.js';
                    script.onload = function() {
                        console.log('‚úÖ React app loaded successfully');
                        document.getElementById('integration-status').textContent = 'React App Loaded';
                    };
                    script.onerror = function() {
                        console.error('‚ùå Failed to load React app');
                        document.getElementById('integration-status').textContent = 'Failed to load React app';
                    };
                    
                    // Append to head
                    document.head.appendChild(script);
                } catch (error) {
                    console.error('Error loading React app:', error);
                    document.getElementById('integration-status').textContent = 'Error loading React app';
                }
            }
            
            // Load when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', loadReactApp);
            } else {
                loadReactApp();
            }
        })();
    </script>
</body>
</html> 